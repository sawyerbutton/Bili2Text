# Bili2Text Web

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å“”å“©å“”å“©è§†é¢‘è½¬å½•Webåº”ç”¨ï¼ŒåŸºäºOpenAI WhisperæŠ€æœ¯ï¼Œæä¾›ç°ä»£åŒ–çš„Webç•Œé¢å’Œå®Œæ•´çš„ä»»åŠ¡ç®¡ç†ç³»ç»Ÿã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- ğŸ¥ **æ™ºèƒ½è§†é¢‘è½¬å½•** - æ”¯æŒBç«™è§†é¢‘URLä¸€é”®è½¬å½•
- ğŸ™ï¸ **é«˜ç²¾åº¦è¯­éŸ³è¯†åˆ«** - åŸºäºOpenAI Whisperå¤šæ¨¡å‹æ”¯æŒ
- ğŸ“ **å¤šæ ¼å¼è¾“å‡º** - TXTã€Markdownã€JSONç­‰å¤šç§æ ¼å¼
- ğŸ”„ **å®æ—¶è¿›åº¦ç›‘æ§** - WebSocketå®æ—¶çŠ¶æ€æ›´æ–°
- ğŸ“Š **è¯¦ç»†ç»Ÿè®¡åˆ†æ** - ä»»åŠ¡ç»Ÿè®¡ã€æ€§èƒ½ç›‘æ§ã€ä½¿ç”¨è¶‹åŠ¿
- ğŸ—‚ï¸ **ä»»åŠ¡å†å²ç®¡ç†** - å®Œæ•´çš„ä»»åŠ¡è®°å½•å’Œæ–‡ä»¶ç®¡ç†

### ğŸŒ Webç•Œé¢ç‰¹æ€§
- ğŸ¨ **ç°ä»£åŒ–ç•Œé¢** - åŸºäºBootstrap 5çš„å“åº”å¼è®¾è®¡
- ğŸ“± **ç§»åŠ¨ç«¯é€‚é…** - å®Œæ•´çš„ç§»åŠ¨è®¾å¤‡æ”¯æŒ
- ğŸŒ™ **æ·±è‰²æ¨¡å¼** - æŠ¤çœ¼çš„æ·±è‰²ä¸»é¢˜
- âš¡ **å®æ—¶é€šä¿¡** - WebSocketåŒå‘é€šä¿¡
- ğŸ“ˆ **æ•°æ®å¯è§†åŒ–** - Chart.jsæ€§èƒ½å›¾è¡¨
- ğŸ” **é«˜çº§æœç´¢** - å¤šæ¡ä»¶ç­›é€‰å’Œæœç´¢

### ğŸ› ï¸ æŠ€æœ¯ç‰¹æ€§
- ğŸ”§ **RESTful API** - æ ‡å‡†åŒ–çš„APIæ¥å£è®¾è®¡
- ğŸš€ **å¼‚æ­¥ä»»åŠ¡å¤„ç†** - å¤šçº¿ç¨‹å¹¶å‘å¤„ç†
- ğŸ’¾ **æ•°æ®æŒä¹…åŒ–** - SQLiteæ•°æ®åº“å­˜å‚¨
- ğŸ“ **æ™ºèƒ½æ–‡ä»¶ç®¡ç†** - è‡ªåŠ¨æ¸…ç†å’Œå­˜å‚¨ä¼˜åŒ–
- ğŸ”’ **å®‰å…¨å¯é ** - å®Œå–„çš„é”™è¯¯å¤„ç†å’ŒéªŒè¯æœºåˆ¶
- ğŸ³ **å®¹å™¨åŒ–éƒ¨ç½²** - Dockerä¸€é”®éƒ¨ç½²

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### ğŸ–¥ï¸ æœ€ä½é…ç½®
- **CPU**: 4æ ¸å¿ƒ 2.0GHz+
- **å†…å­˜**: 8GB RAM (æ¨è16GB+)
- **å­˜å‚¨**: 50GB+ å¯ç”¨ç©ºé—´ (SSDæ¨è)
- **Python**: 3.9+ (æ¨è3.11)
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.15+, Ubuntu 20.04+

### ğŸš€ æ¨èé…ç½®
- **CPU**: 8æ ¸å¿ƒ 3.0GHz+ (æ”¯æŒAVXæŒ‡ä»¤é›†)
- **å†…å­˜**: 32GB RAM
- **GPU**: NVIDIA RTX 3060+ (8GB+ VRAM, å¯é€‰)
- **å­˜å‚¨**: 200GB+ NVMe SSD
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

### ğŸ”§ æ ¸å¿ƒä¾èµ–
- **yt-dlp** - è§†é¢‘ä¸‹è½½å¼•æ“
- **FFmpeg** - éŸ³é¢‘å¤„ç†å·¥å…·
- **OpenAI Whisper** - è¯­éŸ³è¯†åˆ«å¼•æ“
- **Flask + SocketIO** - Webæ¡†æ¶
- **SQLite** - æ•°æ®åº“å¼•æ“

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### Linux/macOS
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/Bili2Text.git
cd Bili2Text

# ä¸€é”®éƒ¨ç½²
chmod +x deploy.sh
./deploy.sh deploy

# æŸ¥çœ‹çŠ¶æ€
./deploy.sh status
```

#### Windows
```powershell
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/Bili2Text.git
cd Bili2Text

# ä¸€é”®éƒ¨ç½²
.\deploy.ps1 deploy

# æŸ¥çœ‹çŠ¶æ€
.\deploy.ps1 status
```

éƒ¨ç½²å®Œæˆåè®¿é—®ï¼š**http://localhost**

### æ–¹æ³•äºŒï¼šæºç éƒ¨ç½²

#### 1. ç¯å¢ƒå‡†å¤‡
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/Bili2Text.git
cd Bili2Text

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3.11 -m venv venv
source venv/bin/activate  # Linux/macOS
# æˆ– venv\Scripts\activate  # Windows
```

#### 2. å®‰è£…ä¾èµ–
```bash
# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt

# å®‰è£…FFmpeg
# Ubuntu/Debian: sudo apt install ffmpeg
# macOS: brew install ffmpeg
# Windows: choco install ffmpeg

# å®‰è£…yt-dlp
pip install yt-dlp
```

#### 3. é…ç½®ç¯å¢ƒ
```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶
cp env.example .env

# ç¼–è¾‘é…ç½®ï¼ˆå¯é€‰ï¼‰
nano .env
```

#### 4. å¯åŠ¨æœåŠ¡
```bash
# æµ‹è¯•åº”ç”¨
python test_app.py

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python run.py --debug

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
python run.py --production --host 0.0.0.0 --port 8000
```

#### 5. è®¿é—®åº”ç”¨
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š**http://localhost:5000**

## ğŸ“ é¡¹ç›®ç»“æ„

```
Bili2Text/
â”œâ”€â”€ ğŸ“± webapp/                     # Webåº”ç”¨ä¸»ç›®å½•
â”‚   â”œâ”€â”€ ğŸ”Œ api/                   # APIæ¥å£å±‚
â”‚   â”‚   â”œâ”€â”€ routes.py            # RESTful APIè·¯ç”±
â”‚   â”‚   â””â”€â”€ websocket_handlers.py # WebSocketäº‹ä»¶å¤„ç†
â”‚   â”œâ”€â”€ ğŸ§  core/                  # æ ¸å¿ƒä¸šåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ config.py            # åº”ç”¨é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ database.py          # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ task_manager.py      # ä»»åŠ¡å¤„ç†å¼•æ“
â”‚   â”‚   â”œâ”€â”€ file_manager.py      # æ–‡ä»¶å­˜å‚¨ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ system_monitor.py    # ç³»ç»Ÿç›‘æ§
â”‚   â”‚   â””â”€â”€ error_handler.py     # é”™è¯¯å¤„ç†
â”‚   â”œâ”€â”€ ğŸ¨ static/                # å‰ç«¯èµ„æº
â”‚   â”‚   â”œâ”€â”€ css/style.css        # æ ·å¼è¡¨
â”‚   â”‚   â”œâ”€â”€ js/                  # JavaScriptæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ main.js          # æ ¸å¿ƒå·¥å…·ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ websocket.js     # WebSocketç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ task-manager.js  # ä»»åŠ¡ç®¡ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ history-manager.js # å†å²ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ system-monitor.js # ç³»ç»Ÿç›‘æ§
â”‚   â”‚   â””â”€â”€ templates/           # HTMLæ¨¡æ¿
â”‚   â”‚       â”œâ”€â”€ base.html        # åŸºç¡€æ¨¡æ¿
â”‚   â”‚       â”œâ”€â”€ index.html       # ä¸»é¡µé¢
â”‚   â”‚       â”œâ”€â”€ history.html     # å†å²è®°å½•
â”‚   â”‚       â””â”€â”€ system.html      # ç³»ç»ŸçŠ¶æ€
â”‚   â””â”€â”€ app.py                   # Flaskåº”ç”¨å…¥å£
â”œâ”€â”€ ğŸ’¾ storage/                    # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ audio/                   # éŸ³é¢‘æ–‡ä»¶å­˜å‚¨
â”‚   â”œâ”€â”€ results/                 # è½¬å½•ç»“æœå­˜å‚¨
â”‚   â””â”€â”€ temp/                    # ä¸´æ—¶æ–‡ä»¶
â”œâ”€â”€ ğŸ³ docker/                     # Dockeré…ç½®
â”‚   â”œâ”€â”€ Dockerfile              # åº”ç”¨é•œåƒ
â”‚   â”œâ”€â”€ docker-compose.yml      # æœåŠ¡ç¼–æ’
â”‚   â””â”€â”€ nginx/                  # Nginxé…ç½®
â”œâ”€â”€ ğŸ“š docs/                       # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ project-design.md       # é¡¹ç›®è®¾è®¡
â”‚   â”œâ”€â”€ architecture-overview.md # æ¶æ„æ¦‚è§ˆ
â”‚   â”œâ”€â”€ deployment-guide.md     # éƒ¨ç½²æŒ‡å—
â”‚   â””â”€â”€ api-documentation.md    # APIæ–‡æ¡£
â”œâ”€â”€ ğŸ› ï¸ scripts/                    # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ deploy.sh               # Linux/macOSéƒ¨ç½²
â”‚   â”œâ”€â”€ deploy.ps1              # Windowséƒ¨ç½²
â”‚   â””â”€â”€ backup.sh               # å¤‡ä»½è„šæœ¬
â”œâ”€â”€ ğŸ“‹ environment*.yml            # Condaç¯å¢ƒé…ç½®
â”œâ”€â”€ requirements.txt            # Pythonä¾èµ–
â”œâ”€â”€ run.py                      # å¯åŠ¨è„šæœ¬
â””â”€â”€ test_app.py                 # åº”ç”¨æµ‹è¯•
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### ğŸ¬ åŸºæœ¬ä½¿ç”¨æµç¨‹

#### 1. åˆ›å»ºè½¬å½•ä»»åŠ¡
- ğŸ“ åœ¨ä¸»é¡µè¾“å…¥Bç«™è§†é¢‘é“¾æ¥ï¼ˆæ”¯æŒå®Œæ•´URLã€çŸ­é“¾æ¥ã€BVå·ï¼‰
- ğŸ™ï¸ é€‰æ‹©Whisperæ¨¡å‹ï¼š
  - **tiny**: å¿«é€Ÿæ¨¡å¼ï¼Œé€‚åˆæµ‹è¯•
  - **base**: å¹³è¡¡æ¨¡å¼ï¼Œæ—¥å¸¸ä½¿ç”¨
  - **medium**: æ¨èæ¨¡å¼ï¼Œè´¨é‡ä¼˜å…ˆ â­
  - **large-v3**: æœ€é«˜è´¨é‡ï¼Œæ…¢é€Ÿç²¾ç¡®
- âš™ï¸ é…ç½®é«˜çº§é€‰é¡¹ï¼ˆä»£ç†ã€è¾“å‡ºæ ¼å¼ã€è¯­è¨€ç­‰ï¼‰
- ğŸš€ ç‚¹å‡»"å¼€å§‹è½¬å½•"

#### 2. å®æ—¶ç›‘æ§è¿›åº¦
- ğŸ“Š æŸ¥çœ‹å®æ—¶ä¸‹è½½å’Œè½¬å½•è¿›åº¦
- â±ï¸ æ˜¾ç¤ºé¢„è®¡å‰©ä½™æ—¶é—´
- ğŸ”„ æ”¯æŒä»»åŠ¡æš‚åœå’Œå–æ¶ˆ
- ğŸ“¢ æ¥æ”¶æµè§ˆå™¨é€šçŸ¥

#### 3. è·å–è½¬å½•ç»“æœ
- ğŸ‘ï¸ åœ¨çº¿é¢„è§ˆè½¬å½•æ–‡æœ¬
- ğŸ“¥ ä¸‹è½½å¤šç§æ ¼å¼æ–‡ä»¶ï¼ˆTXTã€MDã€JSONï¼‰
- ğŸµ ä¸‹è½½åŸå§‹éŸ³é¢‘æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
- ğŸ“‹ ä¸€é”®å¤åˆ¶åˆ°å‰ªè´´æ¿

#### 4. ç®¡ç†ä»»åŠ¡å†å²
- ğŸ“š æŸ¥çœ‹å®Œæ•´ä»»åŠ¡å†å²è®°å½•
- ğŸ” æŒ‰çŠ¶æ€ã€æ—¥æœŸã€å…³é”®è¯æœç´¢
- ğŸ—‘ï¸ æ‰¹é‡åˆ é™¤å’Œæ–‡ä»¶ç®¡ç†
- ğŸ“Š æŸ¥çœ‹ç»Ÿè®¡æ•°æ®å’Œä½¿ç”¨è¶‹åŠ¿

### ğŸš€ é«˜çº§åŠŸèƒ½

#### ğŸ“¦ æ‰¹é‡å¤„ç†
- ğŸ“ æ”¯æŒæ‰¹é‡æäº¤å¤šä¸ªè§†é¢‘URL
- âš¡ æ™ºèƒ½é˜Ÿåˆ—ç®¡ç†å’Œå¹¶å‘æ§åˆ¶
- ğŸ“Š æ‰¹é‡ä¸‹è½½å’Œç»“æœå¯¼å‡º
- ğŸ¯ ç»Ÿä¸€é…ç½®å’Œæ ¼å¼è®¾ç½®

#### ğŸ“ˆ ç³»ç»Ÿç›‘æ§
- ğŸ’» å®æ—¶CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡
- ğŸ“Š ä»»åŠ¡å¤„ç†ç»Ÿè®¡å’Œæ€§èƒ½è¶‹åŠ¿
- ğŸ”§ æœåŠ¡çŠ¶æ€å¥åº·æ£€æŸ¥
- ğŸ“ˆ å¯è§†åŒ–æ€§èƒ½å›¾è¡¨
- ğŸš¨ è‡ªåŠ¨è­¦å‘Šå’Œé”™è¯¯ç›‘æ§

#### âš™ï¸ çµæ´»é…ç½®
- ğŸŒ ä»£ç†è®¾ç½®ï¼ˆHTTP/SOCKSä»£ç†æ”¯æŒï¼‰
- ğŸµ éŸ³é¢‘æ–‡ä»¶ä¿ç•™é€‰é¡¹
- ğŸ“„ å¤šç§è¾“å‡ºæ ¼å¼é€‰æ‹©
- ğŸŒ è¯­è¨€è‡ªåŠ¨æ£€æµ‹å’Œæ‰‹åŠ¨é€‰æ‹©
- ğŸ”§ ä»»åŠ¡å¹¶å‘æ•°å’Œè¶…æ—¶è®¾ç½®

## ğŸ”Œ APIæ–‡æ¡£

### ğŸ“‹ ä»»åŠ¡ç®¡ç†API

#### åˆ›å»ºè½¬å½•ä»»åŠ¡
```http
POST /api/tasks/
Content-Type: application/json

{
    "url": "https://www.bilibili.com/video/BV1234567890",
    "model_name": "medium",
    "options": {
        "use_proxy": false,
        "keep_audio": true,
        "output_format": "txt",
        "language": "auto"
    }
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
    "success": true,
    "data": {
        "id": "task_20240115_143022_abc123",
        "url": "https://www.bilibili.com/video/BV1234567890",
        "status": "pending",
        "model_name": "medium",
        "created_at": "2024-01-15T14:30:22Z"
    },
    "message": "ä»»åŠ¡åˆ›å»ºæˆåŠŸ"
}
```

#### è·å–ä»»åŠ¡åˆ—è¡¨
```http
GET /api/tasks/?page=1&limit=20&status=completed&date_from=2024-01-01
```

#### è·å–ä»»åŠ¡è¯¦æƒ…
```http
GET /api/tasks/{task_id}
```

#### å–æ¶ˆä»»åŠ¡
```http
POST /api/tasks/{task_id}/cancel
```

#### åˆ é™¤ä»»åŠ¡
```http
DELETE /api/tasks/{task_id}
```

### ğŸ“ æ–‡ä»¶æ“ä½œAPI

#### ä¸‹è½½è½¬å½•ç»“æœ
```http
GET /api/files/{task_id}/result
```

#### ä¸‹è½½éŸ³é¢‘æ–‡ä»¶
```http
GET /api/files/{task_id}/audio
```

#### åˆ é™¤ä»»åŠ¡æ–‡ä»¶
```http
DELETE /api/files/{task_id}
```

### ğŸ“Š ç³»ç»ŸçŠ¶æ€API

#### è·å–ç³»ç»ŸçŠ¶æ€
```http
GET /api/system/status
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
    "success": true,
    "data": {
        "status": "healthy",
        "uptime": 86400,
        "cpu_usage": 25.5,
        "memory_usage": 45.2,
        "disk_usage": 67.8,
        "active_tasks": 2,
        "queue_size": 0
    }
}
```

#### è·å–å¯ç”¨æ¨¡å‹
```http
GET /api/system/models
```

#### è·å–ç»Ÿè®¡æ•°æ®
```http
GET /api/system/stats?period=day
```

### ğŸ”„ WebSocketå®æ—¶é€šä¿¡

#### è¿æ¥ç®¡ç†
```javascript
// è¿æ¥åˆ°ä»»åŠ¡æˆ¿é—´
socket.emit('join_task', {task_id: 'task_123456'});

// è¿æ¥åˆ°ç³»ç»Ÿç›‘æ§æˆ¿é—´
socket.emit('join_system');

// å¿ƒè·³æ£€æµ‹
socket.emit('ping');
```

#### å®æ—¶äº‹ä»¶
```javascript
// ä»»åŠ¡çŠ¶æ€æ›´æ–°
socket.on('task_update', (data) => {
    console.log('ä»»åŠ¡æ›´æ–°:', data);
    // {
    //   task_id: 'task_123456',
    //   status: 'transcribing',
    //   progress: 45.5,
    //   stage: 'æ­£åœ¨è½¬å½•éŸ³é¢‘...'
    // }
});

// ä»»åŠ¡å®Œæˆé€šçŸ¥
socket.on('task_notification', (data) => {
    console.log('ä»»åŠ¡å®Œæˆ:', data);
});

// ç³»ç»ŸçŠ¶æ€æ›´æ–°
socket.on('system_update', (data) => {
    console.log('ç³»ç»ŸçŠ¶æ€:', data);
});
```

### ğŸ“ é”™è¯¯å¤„ç†

#### ç»Ÿä¸€é”™è¯¯å“åº”æ ¼å¼
```json
{
    "success": false,
    "error": {
        "code": "TASK_NOT_FOUND",
        "message": "æŒ‡å®šçš„ä»»åŠ¡ä¸å­˜åœ¨",
        "details": {
            "task_id": "invalid_task_id"
        }
    },
    "timestamp": "2024-01-15T14:30:22Z"
}
```

#### é”™è¯¯ä»£ç è¯´æ˜
- `VALIDATION_ERROR` - è¯·æ±‚æ•°æ®éªŒè¯å¤±è´¥
- `INVALID_URL` - æ— æ•ˆçš„è§†é¢‘URL
- `INVALID_MODEL` - ä¸æ”¯æŒçš„æ¨¡å‹
- `SYSTEM_OVERLOAD` - ç³»ç»Ÿè´Ÿè½½è¿‡é«˜
- `TASK_NOT_FOUND` - ä»»åŠ¡ä¸å­˜åœ¨
- `FILE_NOT_FOUND` - æ–‡ä»¶ä¸å­˜åœ¨
- `INTERNAL_ERROR` - å†…éƒ¨æœåŠ¡å™¨é”™è¯¯

## âš™ï¸ é…ç½®è¯´æ˜

### ğŸŒ ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹é€‰é¡¹ï¼š

```bash
# åº”ç”¨åŸºç¡€é…ç½®
APP_NAME=Bili2Text Web
DEBUG=false
SECRET_KEY=your-super-secret-key-here

# æ•°æ®åº“é…ç½®
DATABASE_URL=sqlite:///./storage/bili2text.db

# æ–‡ä»¶å­˜å‚¨é…ç½®
STORAGE_ROOT=./storage
MAX_FILE_SIZE=1073741824  # 1GB

# ä»»åŠ¡å¤„ç†é…ç½®
MAX_CONCURRENT_TASKS=3
TASK_TIMEOUT=3600  # 1å°æ—¶

# Whisperæ¨¡å‹é…ç½®
DEFAULT_MODEL=medium
MODEL_CACHE_PATH=./.cache/whisper

# ç½‘ç»œä»£ç†é…ç½®ï¼ˆå¯é€‰ï¼‰
USE_PROXY=false
PROXY_URL=http://127.0.0.1:7890

# ç³»ç»Ÿç›‘æ§é…ç½®
SYSTEM_MONITOR_INTERVAL=5
PERFORMANCE_HISTORY_LIMIT=100

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
LOG_MAX_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=5
```

### ğŸ›ï¸ Whisperæ¨¡å‹é…ç½®

```python
WHISPER_MODELS = {
    'tiny': {
        'name': 'tiny',
        'size': '39MB',
        'speed': 'very_fast',
        'accuracy': 'low',
        'memory_required': '1GB',
        'recommended_for': 'å¿«é€Ÿæµ‹è¯•ã€å®æ—¶è½¬å½•'
    },
    'base': {
        'name': 'base', 
        'size': '142MB',
        'speed': 'fast',
        'accuracy': 'medium',
        'memory_required': '2GB',
        'recommended_for': 'æ—¥å¸¸ä½¿ç”¨'
    },
    'medium': {
        'name': 'medium',
        'size': '769MB', 
        'speed': 'medium',
        'accuracy': 'high',
        'memory_required': '5GB',
        'recommended_for': 'æ¨èä½¿ç”¨ï¼Œè´¨é‡ä¼˜å…ˆ',
        'default': True
    },
    'large-v3': {
        'name': 'large-v3',
        'size': '1550MB',
        'speed': 'slow', 
        'accuracy': 'very_high',
        'memory_required': '10GB',
        'recommended_for': 'æœ€é«˜è´¨é‡è½¬å½•'
    }
}
```

### ğŸ”§ é«˜çº§é…ç½®é€‰é¡¹

```python
# æ”¯æŒçš„è¾“å‡ºæ ¼å¼
SUPPORTED_OUTPUT_FORMATS = ['txt', 'md', 'json']

# æ”¯æŒçš„è¯­è¨€
SUPPORTED_LANGUAGES = {
    'auto': 'è‡ªåŠ¨æ£€æµ‹',
    'zh': 'ä¸­æ–‡',
    'en': 'è‹±æ–‡', 
    'ja': 'æ—¥æ–‡',
    'ko': 'éŸ©æ–‡',
    'fr': 'æ³•æ–‡',
    'de': 'å¾·æ–‡',
    'es': 'è¥¿ç­ç‰™æ–‡',
    'ru': 'ä¿„æ–‡'
}

# WebSocketé…ç½®
WEBSOCKET_HEARTBEAT_INTERVAL = 30  # ç§’
WEBSOCKET_TIMEOUT = 60  # ç§’

# å®‰å…¨é…ç½®
ALLOWED_HOSTS = ['localhost', '127.0.0.1']
CORS_ORIGINS = ['*']

# ç¼“å­˜é…ç½®
CACHE_TYPE = 'simple'
CACHE_DEFAULT_TIMEOUT = 300  # 5åˆ†é’Ÿ
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### ğŸ³ Dockerå¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰

#### ä½¿ç”¨è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
```bash
# Linux/macOS
./deploy.sh deploy

# Windows PowerShell
.\deploy.ps1 deploy

# ç®¡ç†å‘½ä»¤
./deploy.sh status    # æŸ¥çœ‹çŠ¶æ€
./deploy.sh logs      # æŸ¥çœ‹æ—¥å¿—
./deploy.sh backup    # å¤‡ä»½æ•°æ®
./deploy.sh restart   # é‡å¯æœåŠ¡
```

#### æ‰‹åŠ¨Dockeréƒ¨ç½²
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/Bili2Text.git
cd Bili2Text

# é…ç½®ç¯å¢ƒå˜é‡
cp env.example .env
nano .env

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f bili2text-web
```

#### æœåŠ¡æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Nginxåå‘ä»£ç†  â”‚â—„â”€â”€â–ºâ”‚  Bili2Text App  â”‚â—„â”€â”€â–ºâ”‚  Redisç¼“å­˜æœåŠ¡  â”‚
â”‚   (ç«¯å£:80/443)  â”‚    â”‚   (ç«¯å£:8000)   â”‚    â”‚   (ç«¯å£:6379)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   é™æ€æ–‡ä»¶æœåŠ¡   â”‚    â”‚   æ–‡ä»¶å­˜å‚¨      â”‚    â”‚   SQLiteæ•°æ®åº“  â”‚
â”‚   (CSS/JS)      â”‚    â”‚   (éŸ³é¢‘/ç»“æœ)   â”‚    â”‚   (ä»»åŠ¡è®°å½•)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âš™ï¸ ç”Ÿäº§ç¯å¢ƒé…ç½®

#### Nginxåå‘ä»£ç†é…ç½®
```nginx
# /etc/nginx/sites-available/bili2text
server {
    listen 80;
    server_name your-domain.com;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name your-domain.com;
    
    # SSLé…ç½®
    ssl_certificate /etc/nginx/ssl/cert.pem;
    ssl_certificate_key /etc/nginx/ssl/key.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    
    # æ€§èƒ½ä¼˜åŒ–
    client_max_body_size 1G;
    keepalive_timeout 65;
    
    # åº”ç”¨ä»£ç†
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # WebSocketæ”¯æŒ
    location /socket.io/ {
        proxy_pass http://127.0.0.1:8000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
    
    # é™æ€æ–‡ä»¶ç¼“å­˜
    location /static/ {
        alias /path/to/Bili2Text/webapp/static/;
        expires 30d;
        add_header Cache-Control "public, immutable";
    }
}
```

#### ç³»ç»ŸæœåŠ¡é…ç½®
```ini
# /etc/systemd/system/bili2text-web.service
[Unit]
Description=Bili2Text Web Application
After=network.target

[Service]
Type=exec
User=bili2text
Group=bili2text
WorkingDirectory=/home/bili2text/Bili2Text
Environment=PATH=/home/bili2text/Bili2Text/venv/bin
ExecStart=/home/bili2text/Bili2Text/venv/bin/python run.py --production --host 127.0.0.1 --port 8000
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
```

### ğŸ”’ å®‰å…¨é…ç½®

#### SSLè¯ä¹¦é…ç½®
```bash
# ä½¿ç”¨Let's Encryptå…è´¹SSL
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸ
sudo crontab -e
# æ·»åŠ ï¼š0 12 * * * /usr/bin/certbot renew --quiet
```

#### é˜²ç«å¢™é…ç½®
```bash
# Ubuntu/Debian
sudo ufw allow ssh
sudo ufw allow http
sudo ufw allow https
sudo ufw enable

# CentOS/RHEL
sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload
```

## ğŸ”§ æ•…éšœæ’é™¤

### â“ å¸¸è§é—®é¢˜è§£å†³

#### 1. ğŸ™ï¸ Whisperæ¨¡å‹ç›¸å…³é—®é¢˜
```bash
# é—®é¢˜ï¼šæ¨¡å‹ä¸‹è½½å¤±è´¥
# è§£å†³æ–¹æ¡ˆï¼š
# 1. æ£€æŸ¥ç½‘ç»œè¿æ¥
ping huggingface.co

# 2. é…ç½®ä»£ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
export HTTPS_PROXY=http://127.0.0.1:7890

# 3. æ‰‹åŠ¨ä¸‹è½½æ¨¡å‹
python -c "import whisper; whisper.load_model('medium')"

# 4. æ¸…ç†ç¼“å­˜é‡æ–°ä¸‹è½½
rm -rf ~/.cache/whisper/
```

#### 2. ğŸ“¹ è§†é¢‘ä¸‹è½½é—®é¢˜
```bash
# é—®é¢˜ï¼šè§†é¢‘ä¸‹è½½å¤±è´¥
# è§£å†³æ–¹æ¡ˆï¼š
# 1. æ›´æ–°yt-dlpåˆ°æœ€æ–°ç‰ˆæœ¬
pip install --upgrade yt-dlp

# 2. æµ‹è¯•URLæœ‰æ•ˆæ€§
yt-dlp --list-formats "https://www.bilibili.com/video/BV1234567890"

# 3. ä½¿ç”¨ä»£ç†
yt-dlp --proxy "http://127.0.0.1:7890" [URL]

# 4. æ£€æŸ¥FFmpegå®‰è£…
ffmpeg -version
```

#### 3. âš¡ ç³»ç»Ÿæ€§èƒ½é—®é¢˜
```bash
# é—®é¢˜ï¼šå†…å­˜ä¸è¶³æˆ–CPUä½¿ç”¨ç‡è¿‡é«˜
# è§£å†³æ–¹æ¡ˆï¼š
# 1. æ£€æŸ¥ç³»ç»Ÿèµ„æº
htop
free -h
df -h

# 2. è°ƒæ•´å¹¶å‘ä»»åŠ¡æ•°
# åœ¨.envæ–‡ä»¶ä¸­è®¾ç½®ï¼š
MAX_CONCURRENT_TASKS=1

# 3. ä½¿ç”¨æ›´å°çš„æ¨¡å‹
# é€‰æ‹©tinyæˆ–baseæ¨¡å‹

# 4. å¢åŠ è™šæ‹Ÿå†…å­˜
sudo fallocate -l 2G /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
```

#### 4. ğŸŒ ç½‘ç»œè¿æ¥é—®é¢˜
```bash
# é—®é¢˜ï¼šWebSocketè¿æ¥å¤±è´¥
# è§£å†³æ–¹æ¡ˆï¼š
# 1. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
sudo ufw status
sudo ufw allow 8000

# 2. æ£€æŸ¥ä»£ç†é…ç½®
curl -I http://localhost:8000/api/system/status

# 3. éªŒè¯æµè§ˆå™¨å…¼å®¹æ€§
# ä½¿ç”¨Chrome/Firefoxæœ€æ–°ç‰ˆæœ¬

# 4. æ£€æŸ¥Nginxé…ç½®
sudo nginx -t
sudo systemctl status nginx
```

### ğŸ“‹ æ—¥å¿—åˆ†æ

#### åº”ç”¨æ—¥å¿—æŸ¥çœ‹
```bash
# å®æ—¶æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f webapp/logs/bili2text_web.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f webapp/logs/error.log

# Dockerç¯å¢ƒæŸ¥çœ‹æ—¥å¿—
docker-compose logs -f bili2text-web

# ç³»ç»ŸæœåŠ¡æ—¥å¿—
sudo journalctl -u bili2text-web -f --no-pager
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ğŸ’» å¼€å‘ç¯å¢ƒæ­å»º

```bash
# 1. å…‹éš†å¼€å‘åˆ†æ”¯
git clone -b develop https://github.com/your-username/Bili2Text.git
cd Bili2Text

# 2. åˆ›å»ºå¼€å‘ç¯å¢ƒ
python3.11 -m venv venv-dev
source venv-dev/bin/activate

# 3. å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements.txt

# 4. è¿è¡Œæµ‹è¯•
python test_app.py
pytest tests/ -v

# 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python run.py --debug
```

### ğŸ¤ è´¡çŒ®æŒ‡å—

#### æäº¤è§„èŒƒ
```bash
# æäº¤æ¶ˆæ¯æ ¼å¼ï¼š
# type(scope): description
# 
# ç±»å‹è¯´æ˜ï¼š
# feat: æ–°åŠŸèƒ½
# fix: ä¿®å¤bug
# docs: æ–‡æ¡£æ›´æ–°
# style: ä»£ç æ ¼å¼è°ƒæ•´
# refactor: ä»£ç é‡æ„
# test: æµ‹è¯•ç›¸å…³

# ç¤ºä¾‹ï¼š
git commit -m "feat(api): add batch processing endpoint"
git commit -m "fix(websocket): resolve connection timeout issue"
```

#### è´¡çŒ®æµç¨‹
1. ğŸ´ **Forké¡¹ç›®** - åœ¨GitHubä¸ŠForkæœ¬é¡¹ç›®
2. ğŸŒ¿ **åˆ›å»ºåˆ†æ”¯** - `git checkout -b feature/your-feature-name`
3. ğŸ’» **å¼€å‘åŠŸèƒ½** - ç¼–å†™ä»£ç å¹¶ç¡®ä¿æµ‹è¯•é€šè¿‡
4. ğŸ“ **æäº¤ä»£ç ** - éµå¾ªæäº¤è§„èŒƒ
5. ğŸ”€ **åˆ›å»ºPR** - æäº¤Pull Requestå¹¶æè¿°æ›´æ”¹
- [Bootstrap](https://getbootstrap.com/) - UIæ¡†æ¶

## ğŸ”§ ç»´æŠ¤å’Œç›‘æ§

### ğŸ“Š æ€§èƒ½ç›‘æ§
```bash
# æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨
htop
free -h
df -h

# ç›‘æ§åº”ç”¨æ€§èƒ½
curl -s http://localhost:8000/api/system/status | jq .

# æŸ¥çœ‹æ´»è·ƒä»»åŠ¡
curl -s http://localhost:8000/api/tasks/?status=pending,downloading,transcribing

# Dockerå®¹å™¨ç›‘æ§
docker stats bili2text-web
```

### ğŸ”„ å¤‡ä»½å’Œæ¢å¤
```bash
# å¤‡ä»½æ•°æ®åº“
cp storage/bili2text.db backup/bili2text_$(date +%Y%m%d_%H%M%S).db

# å¤‡ä»½å­˜å‚¨æ–‡ä»¶
tar -czf backup/storage_$(date +%Y%m%d_%H%M%S).tar.gz storage/

# æ¢å¤æ•°æ®ï¼ˆåœæ­¢æœåŠ¡ï¼‰
./deploy.sh stop
cp backup/bili2text_20240115_143022.db storage/bili2text.db
./deploy.sh start
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MIT è®¸å¯è¯**ï¼Œè¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

### è®¸å¯è¯è¦ç‚¹
- âœ… å•†ä¸šä½¿ç”¨
- âœ… ä¿®æ”¹ä»£ç 
- âœ… åˆ†å‘ä»£ç 
- âœ… ç§äººä½¿ç”¨
- â— éœ€è¦åŒ…å«è®¸å¯è¯å’Œç‰ˆæƒå£°æ˜
- â— è½¯ä»¶"æŒ‰åŸæ ·"æä¾›ï¼Œæ— ä»»ä½•ä¿è¯

## ğŸ™ è‡´è°¢

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- ğŸ™ï¸ [**OpenAI Whisper**](https://github.com/openai/whisper) - å¼ºå¤§çš„è¯­éŸ³è¯†åˆ«å¼•æ“
- ğŸ“¹ [**yt-dlp**](https://github.com/yt-dlp/yt-dlp) - å¯é çš„è§†é¢‘ä¸‹è½½å·¥å…·
- ğŸŒ [**Flask**](https://flask.palletsprojects.com/) - è½»é‡çº§Webæ¡†æ¶
- âš¡ [**Flask-SocketIO**](https://flask-socketio.readthedocs.io/) - å®æ—¶é€šä¿¡æ”¯æŒ
- ğŸ¨ [**Bootstrap 5**](https://getbootstrap.com/) - ç°ä»£UIæ¡†æ¶
- ğŸ“Š [**Chart.js**](https://www.chartjs.org/) - æ•°æ®å¯è§†åŒ–åº“

### å¼€å‘å·¥å…·
- ğŸ³ [**Docker**](https://www.docker.com/) - å®¹å™¨åŒ–éƒ¨ç½²
- ğŸ”§ [**pytest**](https://docs.pytest.org/) - æµ‹è¯•æ¡†æ¶
- ğŸ“¦ [**pip**](https://pip.pypa.io/) - åŒ…ç®¡ç†å·¥å…·

## ğŸ“ è”ç³»æ–¹å¼

### ğŸ¤ è·å–å¸®åŠ©
- ğŸ“‹ [**æäº¤Issue**](https://github.com/your-username/Bili2Text/issues) - æŠ¥å‘ŠBugæˆ–åŠŸèƒ½è¯·æ±‚
- ğŸ’¬ [**è®¨è®ºåŒº**](https://github.com/your-username/Bili2Text/discussions) - ç¤¾åŒºè®¨è®ºå’ŒQ&A
- ğŸ“§ **é‚®ä»¶æ”¯æŒ** - your-email@example.com

### ğŸŒŸ æ”¯æŒé¡¹ç›®
å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘ï¼š
- â­ ç»™é¡¹ç›®ç‚¹ä¸ªStar
- ğŸ´ Forké¡¹ç›®å¹¶å‚ä¸è´¡çŒ®
- ğŸ“¢ æ¨èç»™å…¶ä»–å¼€å‘è€…

---

<div align="center">

**âš¡ å¿«é€Ÿéƒ¨ç½² | ğŸ¯ æ™ºèƒ½è½¬å½• | ğŸŒ ç°ä»£ç•Œé¢ | ğŸ”’ å®‰å…¨å¯é **

Made with â¤ï¸ by the Bili2Text Team

</div>